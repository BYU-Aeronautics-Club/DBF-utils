% expanded CO architecture diagram produced by the TikZ package
\documentclass[]{byu-aero}

\def \theyear {2020}
\def \nextyear {2021}

\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}
\setlength{\PreviewBorder}{0em}


%GANTT CHART
\usepackage{pgfgantt}
\ganttset{
	time slot format=isodate,
	time slot unit=day,
	x unit=0.05cm,
	y unit title=0.45cm,
	y unit chart=0.35cm,
	hgrid,
	canvas/.append style={draw=\BYUblue},
	%
	title label font=\bfseries\small,
	title height=1,
	title/.style={fill=\BYUbluelite,draw=\BYUblue},
	%
	today = \nextyear-02-20,
	today label = Current Date,
	today label font=\itshape\footnotesize,
	today rule/.style={draw=\BYUgray,dashed},
	%
	group/.append style={fill=\BYUbluemid,draw=\BYUblue},
	group top shift=0.25,
	group height=.25,
	group right peak tip position=0.0,
	group left peak tip position=0.0,
	group peaks width=2.0,
	group peaks height=0.25,
	group label font = \bfseries\small,
	%
	bar/.append style={fill=\BYUblue,draw=\BYUblue},
	bar label font=\small,
	bar height = 0.25,
	%	bar top shift = 0.25,
	progress label text = {},
	%
	milestone/.append style={fill=\BYUbluelite,draw=\BYUblue,xscale=6},
	milestone height = 0.95,
	milestone top shift = 0.0,
	milestone label font = \itshape\small,
	%
	%	link/.append style={draw=\BYUblue},
	link tolerance = 10,
	link bulge = 10,
}

\begin{document}
	\begin{figure}[h!]
	\centering
	\begin{ganttchart}[]{\theyear-09-01}{\nextyear-04-30}
		%
		\gantttitlecalendar{year, month=shortname} \\
		%
		%%--DESIGN--%%
		\ganttgroup{Design}{\theyear-09-14}{\nextyear-02-07};
		% ACTUAL
		\ganttgroup[group/.append style={fill=\BYUredlite,draw=\BYUred}, group height = 0.125,
		group top shift = 0.5675]{}{\theyear-09-14}{\nextyear-02-07}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Conceptual Design}{\theyear-09-14}{\theyear-10-07};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Preliminary Design}{\theyear-10-31}{\theyear-12-01};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Detailed Design}{\theyear-12-28}{\nextyear-01-28};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		%%--PROTOTYPING--%%
		% PLANNED
		\ganttgroup{Build}{\theyear-10-01}{\nextyear-03-21};
		% ACTUAL
		\ganttgroup[group/.append style={fill=\BYUredlite,draw=\BYUred}, group height = 0.125,
		group top shift = 0.5675]{}{\theyear-09-14}{\nextyear-02-07}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Conceptual Prototypes}{\theyear-10-01}{\theyear-10-14};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Preliminary Prototypes}{\theyear-11-14}{\theyear-12-14};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Detailed Prototypes}{\nextyear-01-07}{\nextyear-02-01};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100, bar/.append style={fill=\BYUgreen}]{Final Build}{\nextyear-02-20}{\nextyear-03-21}\\
		%
		%%--TESTING--%%
		%
		% PLANNED
		\ganttgroup{Fly}{\theyear-10-07}{\nextyear-03-28};
		% ACTUAL
		\ganttgroup[group/.append style={fill=\BYUredlite,draw=\BYUred}, group height = 0.125,
		group top shift = 0.5675]{}{\theyear-09-14}{\nextyear-02-07}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Conceptual Testing}{\theyear-10-07}{\theyear-10-28};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Preliminary Testing}{\theyear-12-01}{\theyear-12-21};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100]{Detailed Testing}{\nextyear-01-14}{\nextyear-02-07};
		% ACTUAL
		\ganttbar[progress=100, bar height=0.125, bar top shift = 0.5675, bar/.append style={fill=\BYUredlite,draw=none}]{}{\theyear-10-01}{\theyear-10-21}\\
		%
		% PLANNED
		\ganttbar[progress=100,bar/.append style={fill=\BYUgreen}]{Practice Runs}{\nextyear-03-21}{\nextyear-03-28} \\
		%
		% PLANNED
		%%--COMPETING--%%
		%Final Build happens after testing and everything for Design Report is completed. It's okay for this to take a while since we want it to be nice, but we still need to submit proof of flight.
		\ganttgroup{Competition Milestones}{\theyear-10-30}{\nextyear-04-16} \\
		%Submit Proposal the day before it is due
		\ganttmilestone[milestone/.append style={fill=\BYUredlite}]{Submit Proposal}{\theyear-10-30} \\
		%Submit the Design Report a Day before it is due.
		\ganttmilestone{Preliminary Design Review}{\theyear-12-21};
		% ACTUAL
		\ganttmilestone[milestone/.append style={fill=\BYUredlite, draw=\BYUred}]{}{\theyear-12-28} \\
		%
		\ganttmilestone[milestone/.append style={fill=\BYUredlite}]{Submit Design Report}{\nextyear-02-20} \\
		\ganttmilestone[milestone/.append style={fill=\BYUgreen}]{Submit Proof of Flight}{\nextyear-04-01} \\
		\ganttmilestone[milestone/.append style={fill=\BYUgreen}]{Fly-off}{\nextyear-04-16}
		%
		%%--VERTICAL RULE--%%
%		\ganttvrule[vrule/.append style={draw=\BYUgray}]{\tiny \textit{Current Date}}{\nextyear-02-20}
		%
		%%--LINKS--%%
		%
%		\ganttlink[link/.append style={draw=\BYUblue}]{elem1}{elem5}
%		\ganttlink[link/.append style={draw=\BYUblue}]{elem5}{elem9}
%		\ganttlink[link/.append style={draw=\BYUblue}]{elem9}{elem14}
%		%
%		\ganttlink[link/.append style={draw=\BYUred}]{elem2}{elem6}
%		\ganttlink[link/.append style={draw=\BYUred}]{elem6}{elem10}
%		\ganttlink[link/.append style={draw=\BYUred}]{elem10}{elem15}
%		%
%		\ganttlink[link/.append style={draw=\BYUred}]{elem3}{elem7}
%		\ganttlink[link/.append style={draw=\BYUred}]{elem7}{elem11}
%		\ganttlink[link/.append style={draw=\BYUred}]{elem11}{elem16}
	\end{ganttchart}
\end{figure}

\end{document}